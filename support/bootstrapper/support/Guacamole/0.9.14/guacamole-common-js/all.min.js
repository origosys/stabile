var Guacamole=Guacamole||{};Guacamole.ArrayBufferReader=function(b){var a=this;b.onblob=function(b){b=window.atob(b);for(var e=new ArrayBuffer(b.length),c=new Uint8Array(e),h=0;h<b.length;h++)c[h]=b.charCodeAt(h);if(a.ondata)a.ondata(e)};b.onend=function(){if(a.onend)a.onend()};this.onend=this.ondata=null};Guacamole=Guacamole||{};
Guacamole.ArrayBufferWriter=function(b){function a(a){for(var c="",d=0;d<a.byteLength;d++)c+=String.fromCharCode(a[d]);b.sendBlob(window.btoa(c))}var d=this;b.onack=function(a){if(d.onack)d.onack(a)};this.sendData=function(b){b=new Uint8Array(b);if(8064>=b.length)a(b);else for(var c=0;c<b.length;c+=8064)a(b.subarray(c,c+8094))};this.sendEnd=function(){b.sendEnd()};this.onack=null};Guacamole=Guacamole||{};Guacamole.AudioPlayer=function(){this.sync=function(){}};
Guacamole.AudioPlayer.isSupportedType=function(b){return Guacamole.RawAudioPlayer.isSupportedType(b)};Guacamole.AudioPlayer.getSupportedTypes=function(){return Guacamole.RawAudioPlayer.getSupportedTypes()};Guacamole.AudioPlayer.getInstance=function(b,a){return Guacamole.RawAudioPlayer.isSupportedType(a)?new Guacamole.RawAudioPlayer(b,a):null};
Guacamole.RawAudioPlayer=function(b,a){var d=Guacamole.RawAudioPlayer._Format.parse(a),e=function(){var a=window.AudioContext||window.webkitAudioContext;if(a)try{return new a}catch(c){}return null}(),c=e.currentTime,h=new Guacamole.ArrayBufferReader(b),k=1===d.bytesPerSample?window.Int8Array:window.Int16Array,l=1===d.bytesPerSample?128:32768,g=[],m=function(a){if(1>=a.length)return a[0];var c=0;a.forEach(function(a){c+=a.length});var b=0,e=new k(c);a.forEach(function(a){e.set(a,b);b+=a.length});return e};
h.ondata=function(a){a=new k(a);g.push(new k(a));if(a=m(g)){for(var b=Number.MAX_VALUE,h=a.length,s=Math.floor(0.02*d.rate),s=Math.max(d.channels*s,d.channels*(Math.floor(a.length/d.channels)-s));s<a.length;s+=d.channels){for(var p=0,t=0;t<d.channels;t++)p+=Math.abs(a[s+t]);p<=b&&(h=s+d.channels,b=p)}g=h===a.length?[a]:[new k(a.buffer.slice(0,h*d.bytesPerSample)),new k(a.buffer.slice(h*d.bytesPerSample))];a=g.shift()}else a=null;if(a){b=e.currentTime;c<b&&(c=b);b=e.createBufferSource();b.connect(e.destination);
b.start||(b.start=b.noteOn);h=a;s=h.length/d.channels;p=e.currentTime;c<p&&(c=p);p=e.createBuffer(d.channels,s,d.rate);for(t=0;t<d.channels;t++)for(var y=p.getChannelData(t),w=t,x=0;x<s;x++)y[x]=h[w]/l,w+=d.channels;b.buffer=p;b.start(c);c+=a.length/d.channels/d.rate}};this.sync=function(){c=Math.min(c,e.currentTime+0.3)}};Guacamole.RawAudioPlayer.prototype=new Guacamole.AudioPlayer;
Guacamole.RawAudioPlayer._Format=function(b){this.bytesPerSample=b.bytesPerSample;this.channels=b.channels;this.rate=b.rate};
Guacamole.RawAudioPlayer._Format.parse=function(b){var a,d=null,e=1;if("audio/L8;"===b.substring(0,9))b=b.substring(9),a=1;else if("audio/L16;"===b.substring(0,10))b=b.substring(10),a=2;else return null;b=b.split(",");for(var c=0;c<b.length;c++){var h=b[c],k=h.indexOf("\x3d");if(-1===k)return null;var l=h.substring(0,k),h=h.substring(k+1);switch(l){case "channels":e=parseInt(h);break;case "rate":d=parseInt(h);break;default:return null}}return null===d?null:new Guacamole.RawAudioPlayer._Format({bytesPerSample:a,
channels:e,rate:d})};Guacamole.RawAudioPlayer.isSupportedType=function(b){return!window.AudioContext&&!window.webkitAudioContext?!1:null!==Guacamole.RawAudioPlayer._Format.parse(b)};Guacamole.RawAudioPlayer.getSupportedTypes=function(){return!window.AudioContext&&!window.webkitAudioContext?[]:["audio/L8","audio/L16"]};Guacamole=Guacamole||{};
Guacamole.BlobReader=function(b,a){var d=this,e=0,c;c=window.BlobBuilder?new BlobBuilder:window.WebKitBlobBuilder?new WebKitBlobBuilder:window.MozBlobBuilder?new MozBlobBuilder:new function(){var c=[];this.append=function(b){c.push(new Blob([b],{type:a}))};this.getBlob=function(){return new Blob(c,{type:a})}};b.onblob=function(a){a=window.atob(a);for(var k=new ArrayBuffer(a.length),l=new Uint8Array(k),g=0;g<a.length;g++)l[g]=a.charCodeAt(g);c.append(k);e+=k.byteLength;if(d.onprogress)d.onprogress(k.byteLength);
b.sendAck("OK",0)};b.onend=function(){if(d.onend)d.onend()};this.getLength=function(){return e};this.getBlob=function(){return c.getBlob()};this.onend=this.onprogress=null};Guacamole=Guacamole||{};
Guacamole.Client=function(b){function a(f){if(f!=k&&(k=f,e.onstatechange))e.onstatechange(k)}function d(){return k==h||k==c}var e=this,c=2,h=3,k=0,l=0,g=null,m={"0":"butt",1:"round",2:"square"},v={"0":"bevel",1:"miter",2:"round"},n=new Guacamole.Display,r={},s={},p=[],t=[],y=[],w=new Guacamole.IntegerPool,x=[];this.getDisplay=function(){return n};this.sendSize=function(f,a){d()&&b.sendMessage("size",f,a)};this.sendKeyEvent=function(f,a){d()&&b.sendMessage("key",a,f)};this.sendMouseState=function(f){if(d()){n.moveCursor(Math.floor(f.x),
Math.floor(f.y));var a=0;f.left&&(a|=1);f.middle&&(a|=2);f.right&&(a|=4);f.up&&(a|=8);f.down&&(a|=16);b.sendMessage("mouse",Math.floor(f.x),Math.floor(f.y),a)}};this.setClipboard=function(f){if(d()){for(var a=e.createClipboardStream("text/plain"),a=new Guacamole.StringWriter(a),c=0;c<f.length;c+=4096)a.sendText(f.substring(c,c+4096));a.sendEnd()}};this.createFileStream=function(f,a){var c=w.next();b.sendMessage("file",c,f,a);var d=x[c]=new Guacamole.OutputStream(e,c),p=d.sendEnd;d.sendEnd=function(){p();
w.free(c);delete x[c]};return d};this.createPipeStream=function(f,a){var c=w.next();b.sendMessage("pipe",c,f,a);var d=x[c]=new Guacamole.OutputStream(e,c),p=d.sendEnd;d.sendEnd=function(){p();w.free(c);delete x[c]};return d};this.createClipboardStream=function(f){var a=w.next();b.sendMessage("clipboard",a,f);f=x[a]=new Guacamole.OutputStream(e,a);var c=f.sendEnd;f.sendEnd=function(){c();w.free(a);delete x[a]};return f};this.createObjectOutputStream=function(f,a,c){var d=w.next();b.sendMessage("put",
f,d,a,c);f=x[d]=new Guacamole.OutputStream(e,d);var p=f.sendEnd;f.sendEnd=function(){p();w.free(d);delete x[d]};return f};this.requestObjectInputStream=function(f,a){d()&&b.sendMessage("get",f,a)};this.sendAck=function(f,a,c){d()&&b.sendMessage("ack",f,a,c)};this.sendBlob=function(f,a){d()&&b.sendMessage("blob",f,a)};this.endStream=function(f){d()&&b.sendMessage("end",f)};this.onsync=this.onpipe=this.onfilesystem=this.onfile=this.onclipboard=this.onvideo=this.onaudio=this.onerror=this.onname=this.onstatechange=
null;var q=function(f){var a=r[f];a||(a=0===f?n.getDefaultLayer():0<f?n.createLayer():n.createBuffer(),r[f]=a);return a},u={"miter-limit":function(f,a){n.setMiterLimit(f,parseFloat(a))}},z={ack:function(f){var a=parseInt(f[0]),c=f[1];f=parseInt(f[2]);var b=x[a];if(b){if(b.onack)b.onack(new Guacamole.Status(f,c));256<=f&&(w.free(a),delete x[a])}},arc:function(f){var a=q(parseInt(f[0])),c=parseInt(f[1]),b=parseInt(f[2]),e=parseInt(f[3]),d=parseFloat(f[4]),p=parseFloat(f[5]);f=parseInt(f[6]);n.arc(a,
c,b,e,d,p,0!=f)},audio:function(f){var a=parseInt(f[0]);f=f[1];var c=t[a]=new Guacamole.InputStream(e,a),b=null;e.onaudio&&(b=e.onaudio(c,f));b||(b=Guacamole.AudioPlayer.getInstance(c,f));b?(s[a]=b,e.sendAck(a,"OK",0)):e.sendAck(a,"BAD TYPE",783)},blob:function(f){var a=parseInt(f[0]);f=f[1];if((a=t[a])&&a.onblob)a.onblob(f)},body:function(f){var a=parseInt(f[0]),a=y[a],c=parseInt(f[1]),b=f[2];f=f[3];a&&a.onbody?(c=t[c]=new Guacamole.InputStream(e,c),a.onbody(c,b,f)):e.sendAck(c,"Receipt of body unsupported",
256)},cfill:function(f){var a=parseInt(f[0]),c=q(parseInt(f[1])),b=parseInt(f[2]),e=parseInt(f[3]),d=parseInt(f[4]);f=parseInt(f[5]);n.setChannelMask(c,a);n.fillColor(c,b,e,d,f)},clip:function(f){f=q(parseInt(f[0]));n.clip(f)},clipboard:function(f){var a=parseInt(f[0]);f=f[1];e.onclipboard?(a=t[a]=new Guacamole.InputStream(e,a),e.onclipboard(a,f)):e.sendAck(a,"Clipboard unsupported",256)},close:function(f){f=q(parseInt(f[0]));n.close(f)},copy:function(f){var a=q(parseInt(f[0])),c=parseInt(f[1]),b=
parseInt(f[2]),e=parseInt(f[3]),d=parseInt(f[4]),p=parseInt(f[5]),g=q(parseInt(f[6])),u=parseInt(f[7]);f=parseInt(f[8]);n.setChannelMask(g,p);n.copy(a,c,b,e,d,g,u,f)},cstroke:function(f){var a=parseInt(f[0]),c=q(parseInt(f[1])),b=m[parseInt(f[2])],e=v[parseInt(f[3])],d=parseInt(f[4]),p=parseInt(f[5]),g=parseInt(f[6]),u=parseInt(f[7]);f=parseInt(f[8]);n.setChannelMask(c,a);n.strokeColor(c,b,e,d,p,g,u,f)},cursor:function(f){var a=parseInt(f[0]),c=parseInt(f[1]),b=q(parseInt(f[2])),e=parseInt(f[3]),
d=parseInt(f[4]),p=parseInt(f[5]);f=parseInt(f[6]);n.setCursor(a,c,b,e,d,p,f)},curve:function(f){var a=q(parseInt(f[0])),c=parseInt(f[1]),b=parseInt(f[2]),e=parseInt(f[3]),d=parseInt(f[4]),p=parseInt(f[5]);f=parseInt(f[6]);n.curveTo(a,c,b,e,d,p,f)},dispose:function(f){f=parseInt(f[0]);0<f?(q(f).dispose(),delete r[f]):0>f&&delete r[f]},distort:function(f){var a=parseInt(f[0]),c=parseFloat(f[1]),b=parseFloat(f[2]),e=parseFloat(f[3]),d=parseFloat(f[4]),p=parseFloat(f[5]);f=parseFloat(f[6]);0<=a&&q(a).distort(c,
b,e,d,p,f)},error:function(f){var a=f[0];f=parseInt(f[1]);if(e.onerror)e.onerror(new Guacamole.Status(f,a));e.disconnect()},end:function(f){f=parseInt(f[0]);if((f=t[f])&&f.onend)f.onend()},file:function(f){var a=parseInt(f[0]),c=f[1];f=f[2];e.onfile?(a=t[a]=new Guacamole.InputStream(e,a),e.onfile(a,c,f)):e.sendAck(a,"File transfer unsupported",256)},filesystem:function(f){var a=parseInt(f[0]);f=f[1];e.onfilesystem&&(a=y[a]=new Guacamole.Object(e,a),e.onfilesystem(a,f))},identity:function(f){f=q(parseInt(f[0]));
n.setTransform(f,1,0,0,1,0,0)},img:function(f){var a=parseInt(f[0]),c=parseInt(f[1]),b=q(parseInt(f[2])),d=f[3],p=parseInt(f[4]),g=parseInt(f[5]);f=t[a]=new Guacamole.InputStream(e,a);var u=new Guacamole.DataURIReader(f,d);u.onend=function(){n.setChannelMask(b,c);n.draw(b,p,g,u.getURI())}},jpeg:function(f){var a=parseInt(f[0]),c=q(parseInt(f[1])),b=parseInt(f[2]),e=parseInt(f[3]);f=f[4];n.setChannelMask(c,a);n.draw(c,b,e,"data:image/jpeg;base64,"+f)},lfill:function(f){var a=parseInt(f[0]),c=q(parseInt(f[1]));
f=q(parseInt(f[2]));n.setChannelMask(c,a);n.fillLayer(c,f)},line:function(f){var a=q(parseInt(f[0])),c=parseInt(f[1]);f=parseInt(f[2]);n.lineTo(a,c,f)},lstroke:function(f){var a=parseInt(f[0]),c=q(parseInt(f[1]));f=q(parseInt(f[2]));n.setChannelMask(c,a);n.strokeLayer(c,f)},move:function(f){var a=parseInt(f[0]),c=parseInt(f[1]),b=parseInt(f[2]),e=parseInt(f[3]);f=parseInt(f[4]);0<a&&0<=c&&(a=q(a),c=q(c),a.move(c,b,e,f))},name:function(a){if(e.onname)e.onname(a[0])},nest:function(a){var c=parseInt(a[0]),
e=p[c];null==e&&(e=p[c]=new Guacamole.Parser,e.oninstruction=b.oninstruction);e.receive(a[1])},pipe:function(a){var c=parseInt(a[0]),b=a[1];a=a[2];e.onpipe?(c=t[c]=new Guacamole.InputStream(e,c),e.onpipe(c,b,a)):e.sendAck(c,"Named pipes unsupported",256)},png:function(a){var c=parseInt(a[0]),b=q(parseInt(a[1])),e=parseInt(a[2]),d=parseInt(a[3]);a=a[4];n.setChannelMask(b,c);n.draw(b,e,d,"data:image/png;base64,"+a)},pop:function(a){a=q(parseInt(a[0]));n.pop(a)},push:function(a){a=q(parseInt(a[0]));
n.push(a)},rect:function(a){var c=q(parseInt(a[0])),b=parseInt(a[1]),e=parseInt(a[2]),d=parseInt(a[3]);a=parseInt(a[4]);n.rect(c,b,e,d,a)},reset:function(a){a=q(parseInt(a[0]));n.reset(a)},set:function(a){var c=q(parseInt(a[0])),b=a[2];(a=u[a[1]])&&a(c,b)},shade:function(a){var c=parseInt(a[0]);a=parseInt(a[1]);0<=c&&q(c).shade(a)},size:function(a){var c=parseInt(a[0]),c=q(c),b=parseInt(a[1]);a=parseInt(a[2]);n.resize(c,b,a)},start:function(a){var c=q(parseInt(a[0])),b=parseInt(a[1]);a=parseInt(a[2]);
n.moveTo(c,b,a)},sync:function(f){var d=parseInt(f[0]);n.flush(function(){for(var a in s){var f=s[a];f&&f.sync()}d!==l&&(b.sendMessage("sync",d),l=d)});k===c&&a(h);if(e.onsync)e.onsync(d)},transfer:function(a){var c=q(parseInt(a[0])),b=parseInt(a[1]),e=parseInt(a[2]),d=parseInt(a[3]),p=parseInt(a[4]),g=parseInt(a[5]),u=q(parseInt(a[6])),m=parseInt(a[7]);a=parseInt(a[8]);3===g?n.put(c,b,e,d,p,u,m,a):5!==g&&n.transfer(c,b,e,d,p,u,m,a,Guacamole.Client.DefaultTransferFunction[g])},transform:function(a){var c=
q(parseInt(a[0])),b=parseFloat(a[1]),e=parseFloat(a[2]),d=parseFloat(a[3]),p=parseFloat(a[4]),g=parseFloat(a[5]);a=parseFloat(a[6]);n.transform(c,b,e,d,p,g,a)},undefine:function(a){a=parseInt(a[0]);if((a=y[a])&&a.onundefine)a.onundefine()},video:function(a){var c=parseInt(a[0]),b=q(parseInt(a[1]));a=a[2];var d=t[c]=new Guacamole.InputStream(e,c),p=null;e.onvideo&&(p=e.onvideo(d,b,a));p||(p=Guacamole.VideoPlayer.getInstance(d,b,a));p?e.sendAck(c,"OK",0):e.sendAck(c,"BAD TYPE",783)}};b.oninstruction=
function(a,c){var b=z[a];b&&b(c)};this.disconnect=function(){5!=k&&4!=k&&(a(4),g&&window.clearInterval(g),b.sendMessage("disconnect"),b.disconnect(),a(5))};this.connect=function(f){a(1);try{b.connect(f)}catch(e){throw a(0),e;}g=window.setInterval(function(){b.sendMessage("sync",l)},5E3);a(c)}};
Guacamole.Client.DefaultTransferFunction={"0":function(b,a){a.red=a.green=a.blue=0},15:function(b,a){a.red=a.green=a.blue=255},3:function(b,a){a.red=b.red;a.green=b.green;a.blue=b.blue;a.alpha=b.alpha},5:function(b,a){},12:function(b,a){a.red=255&~b.red;a.green=255&~b.green;a.blue=255&~b.blue;a.alpha=b.alpha},10:function(b,a){a.red=255&~a.red;a.green=255&~a.green;a.blue=255&~a.blue},1:function(b,a){a.red&=b.red;a.green&=b.green;a.blue&=b.blue},14:function(b,a){a.red=255&~(b.red&a.red);a.green=255&
~(b.green&a.green);a.blue=255&~(b.blue&a.blue)},7:function(b,a){a.red|=b.red;a.green|=b.green;a.blue|=b.blue},8:function(b,a){a.red=255&~(b.red|a.red);a.green=255&~(b.green|a.green);a.blue=255&~(b.blue|a.blue)},6:function(b,a){a.red^=b.red;a.green^=b.green;a.blue^=b.blue},9:function(b,a){a.red=255&~(b.red^a.red);a.green=255&~(b.green^a.green);a.blue=255&~(b.blue^a.blue)},4:function(b,a){a.red=255&~b.red&a.red;a.green=255&~b.green&a.green;a.blue=255&~b.blue&a.blue},13:function(b,a){a.red=255&(~b.red|
a.red);a.green=255&(~b.green|a.green);a.blue=255&(~b.blue|a.blue)},2:function(b,a){a.red=255&b.red&~a.red;a.green=255&b.green&~a.green;a.blue=255&b.blue&~a.blue},11:function(b,a){a.red=255&(b.red|~a.red);a.green=255&(b.green|~a.green);a.blue=255&(b.blue|~a.blue)}};Guacamole=Guacamole||{};Guacamole.DataURIReader=function(b,a){var d=this,e="data:"+a+";base64,";b.onblob=function(a){e+=a};b.onend=function(){if(d.onend)d.onend()};this.getURI=function(){return e};this.onend=null};Guacamole=Guacamole||{};
Guacamole.Display=function(){function b(){for(var a=0;a<s.length;){var c=s[a];if(!c.isReady())break;c.flush();a++}s.splice(0,a)}function a(a,c){this.isReady=function(){for(var a=0;a<c.length;a++)if(c[a].blocked)return!1;return!0};this.flush=function(){for(var b=0;b<c.length;b++)c[b].execute();a&&a()}}function d(a,c){var e=this;this.blocked=c;this.unblock=function(){e.blocked&&(e.blocked=!1,b())};this.execute=function(){a&&a()}}function e(a,c){var b=new d(a,c);r.push(b);return b}var c=this,h=0,k=0,
l=1,g=document.createElement("div");g.style.position="relative";g.style.width=h+"px";g.style.height=k+"px";g.style.transformOrigin=g.style.webkitTransformOrigin=g.style.MozTransformOrigin=g.style.OTransformOrigin=g.style.msTransformOrigin="0 0";var m=new Guacamole.Display.VisibleLayer(h,k),v=new Guacamole.Display.VisibleLayer(0,0);v.setChannelMask(Guacamole.Layer.SRC);g.appendChild(m.getElement());g.appendChild(v.getElement());var n=document.createElement("div");n.style.position="relative";n.style.width=
h*l+"px";n.style.height=k*l+"px";n.appendChild(g);this.cursorY=this.cursorX=this.cursorHotspotY=this.cursorHotspotX=0;this.oncursor=this.onresize=null;var r=[],s=[];this.getElement=function(){return n};this.getWidth=function(){return h};this.getHeight=function(){return k};this.getDefaultLayer=function(){return m};this.getCursorLayer=function(){return v};this.createLayer=function(){var a=new Guacamole.Display.VisibleLayer(h,k);a.move(m,0,0,0);return a};this.createBuffer=function(){var a=new Guacamole.Layer(0,
0);a.autosize=1;return a};this.flush=function(c){s.push(new a(c,r));r=[];b()};this.setCursor=function(a,b,d,g,m,h,u){e(function(){c.cursorHotspotX=a;c.cursorHotspotY=b;v.resize(h,u);v.copy(d,g,m,h,u,0,0);c.moveCursor(c.cursorX,c.cursorY);if(c.oncursor)c.oncursor(v.getCanvas(),a,b)})};this.showCursor=function(a){var c=v.getElement(),b=c.parentNode;!1===a?b&&b.removeChild(c):b!==g&&g.appendChild(c)};this.moveCursor=function(a,b){v.translate(a-c.cursorHotspotX,b-c.cursorHotspotY);c.cursorX=a;c.cursorY=
b};this.resize=function(a,b,d){e(function(){a.resize(b,d);if(a===m&&(h=b,k=d,g.style.width=h+"px",g.style.height=k+"px",n.style.width=h*l+"px",n.style.height=k*l+"px",c.onresize))c.onresize(b,d)})};this.drawImage=function(a,c,b,d){e(function(){a.drawImage(c,b,d)})};this.drawBlob=function(a,c,b,d){var g=URL.createObjectURL(d);d=e(function(){a.drawImage(c,b,m);URL.revokeObjectURL(g)},!0);var m=new Image;m.onload=d.unblock;m.src=g};this.draw=function(a,c,b,d){var g=e(function(){a.drawImage(c,b,m)},!0),
m=new Image;m.onload=g.unblock;m.src=d};this.play=function(a,c,b,d){var g=document.createElement("video");g.type=c;g.src=d;g.addEventListener("play",function(){function c(){a.drawImage(0,0,g);g.ended||window.setTimeout(c,20)}c()},!1);e(g.play)};this.transfer=function(a,c,b,d,g,m,u,h,f){e(function(){m.transfer(a,c,b,d,g,u,h,f)})};this.put=function(a,c,b,d,g,m,u,h){e(function(){m.put(a,c,b,d,g,u,h)})};this.copy=function(a,c,b,d,g,m,u,h){e(function(){m.copy(a,c,b,d,g,u,h)})};this.moveTo=function(a,c,
b){e(function(){a.moveTo(c,b)})};this.lineTo=function(a,c,b){e(function(){a.lineTo(c,b)})};this.arc=function(a,c,b,d,g,m,u){e(function(){a.arc(c,b,d,g,m,u)})};this.curveTo=function(a,c,b,d,g,m,u){e(function(){a.curveTo(c,b,d,g,m,u)})};this.close=function(a){e(function(){a.close()})};this.rect=function(a,c,b,d,g){e(function(){a.rect(c,b,d,g)})};this.clip=function(a){e(function(){a.clip()})};this.strokeColor=function(a,c,b,d,g,m,u,h){e(function(){a.strokeColor(c,b,d,g,m,u,h)})};this.fillColor=function(a,
c,b,d,g){e(function(){a.fillColor(c,b,d,g)})};this.strokeLayer=function(a,c,b,d,g){e(function(){a.strokeLayer(c,b,d,g)})};this.fillLayer=function(a,c){e(function(){a.fillLayer(c)})};this.push=function(a){e(function(){a.push()})};this.pop=function(a){e(function(){a.pop()})};this.reset=function(a){e(function(){a.reset()})};this.setTransform=function(a,c,b,d,g,m,u){e(function(){a.setTransform(c,b,d,g,m,u)})};this.transform=function(a,c,b,d,g,m,u){e(function(){a.transform(c,b,d,g,m,u)})};this.setChannelMask=
function(a,c){e(function(){a.setChannelMask(c)})};this.setMiterLimit=function(a,c){e(function(){a.setMiterLimit(c)})};this.scale=function(a){g.style.transform=g.style.WebkitTransform=g.style.MozTransform=g.style.OTransform=g.style.msTransform="scale("+a+","+a+")";l=a;n.style.width=h*l+"px";n.style.height=k*l+"px"};this.getScale=function(){return l};this.flatten=function(){function a(c){var b=[],d;for(d in c.children)b.push(c.children[d]);b.sort(function(a,c){var b=a.z-c.z;if(0!==b)return b;b=a.getElement();
b=c.getElement().compareDocumentPosition(b);return b&Node.DOCUMENT_POSITION_PRECEDING?-1:b&Node.DOCUMENT_POSITION_FOLLOWING?1:0});return b}function c(b,e,g){if(0<b.width&&0<b.height){var m=d.globalAlpha;d.globalAlpha*=b.alpha/255;d.drawImage(b.getCanvas(),e,g);b=a(b);for(var f=0;f<b.length;f++){var h=b[f];c(h,e+h.x,g+h.y)}d.globalAlpha=m}}var b=document.createElement("canvas");b.width=m.width;b.height=m.height;var d=b.getContext("2d");c(m,0,0);return b}};
Guacamole.Display.VisibleLayer=function(b,a){Guacamole.Layer.apply(this,[b,a]);var d=this;this.__unique_id=Guacamole.Display.VisibleLayer.__next_id++;this.alpha=255;this.z=this.y=this.x=0;this.matrix=[1,0,0,1,0,0];this.parent=null;this.children={};var e=d.getCanvas();e.style.position="absolute";e.style.left="0px";e.style.top="0px";var c=document.createElement("div");c.appendChild(e);c.style.width=b+"px";c.style.height=a+"px";c.style.position="absolute";c.style.left="0px";c.style.top="0px";c.style.overflow=
"hidden";var h=this.resize;this.resize=function(a,b){c.style.width=a+"px";c.style.height=b+"px";h(a,b)};this.getElement=function(){return c};var k="translate(0px, 0px)",l="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(a,b){d.x=a;d.y=b;k="translate("+a+"px,"+b+"px)";c.style.transform=c.style.WebkitTransform=c.style.MozTransform=c.style.OTransform=c.style.msTransform=k+" "+l};this.move=function(a,b,e,h){d.parent!==a&&(d.parent&&delete d.parent.children[d.__unique_id],d.parent=a,a.children[d.__unique_id]=
d,a.getElement().appendChild(c));d.translate(b,e);d.z=h;c.style.zIndex=h};this.shade=function(a){d.alpha=a;c.style.opacity=a/255};this.dispose=function(){d.parent&&(delete d.parent.children[d.__unique_id],d.parent=null);c.parentNode&&c.parentNode.removeChild(c)};this.distort=function(a,b,e,h,r,s){d.matrix=[a,b,e,h,r,s];l="matrix("+a+","+b+","+e+","+h+","+r+","+s+")";c.style.transform=c.style.WebkitTransform=c.style.MozTransform=c.style.OTransform=c.style.msTransform=k+" "+l}};
Guacamole.Display.VisibleLayer.__next_id=0;Guacamole=Guacamole||{};Guacamole.InputStream=function(b,a){var d=this;this.index=a;this.onend=this.onblob=null;this.sendAck=function(a,c){b.sendAck(d.index,a,c)}};Guacamole=Guacamole||{};Guacamole.IntegerPool=function(){var b=this,a=[];this.next_int=0;this.next=function(){return 0<a.length?a.shift():b.next_int++};this.free=function(b){a.push(b)}};Guacamole=Guacamole||{};
Guacamole.JSONReader=function(b){var a=this;b=new Guacamole.StringReader(b);var d="";this.getLength=function(){return d.length};this.getJSON=function(){return JSON.parse(d)};b.ontext=function(b){d+=b;if(a.onprogress)a.onprogress(b.length)};b.onend=function(){if(a.onend)a.onend()};this.onend=this.onprogress=null};Guacamole=Guacamole||{};
Guacamole.Keyboard=function(b){function a(a,c,b){if(!a)return null;var e=a.indexOf("U+");if(0<=e)a=a.substring(e+2),a=String.fromCharCode(parseInt(a,16));else if(!(1===a.length&&3!==c))return!n[a]?null:n[a][c]||n[a][0];!0===b?a=a.toUpperCase():!1===b&&(a=a.toLowerCase());b=a.charCodeAt(0);return d(b)}function d(a){return 31>=a||127<=a&&159>=a?65280|a:0<=a&&255>=a?a:256<=a&&1114111>=a?16777216|a:null}function e(){var a=x();if(!a)return!1;var c;do c=a,a=x();while(null!==a);return c.defaultPrevented}
var c=this;this.onkeyup=this.onkeydown=null;var h=function(){var a=this;this.timestamp=(new Date).getTime();this.defaultPrevented=!1;this.keysym=null;this.reliable=!1;this.getAge=function(){return(new Date).getTime()-a.timestamp}},k=function(b,d,f,e){h.apply(this);this.keyCode=b;this.keyIdentifier=d;this.key=f;this.location=e;if(this.keysym=a(f,e)||(!v[b]?null:v[b][e]||v[b][0]))this.reliable=!0;if(f=!this.keysym)d?(f=d.indexOf("U+"),-1===f?f=!0:(f=parseInt(d.substring(f+2),16),f=b!==f||65<=b&&90>=
b||48<=b&&57>=b?!0:!1)):f=!1;f&&(this.keysym=a(d,e,c.modifiers.shift));d=!c.modifiers.ctrl&&!(navigator&&navigator.platform&&navigator.platform.match(/^mac/i));if(!c.modifiers.alt&&c.modifiers.ctrl||d&&c.modifiers.alt||c.modifiers.meta||c.modifiers.hyper)this.reliable=!0;p[b]=this.keysym};k.prototype=new h;var l=function(a){h.apply(this);this.charCode=a;this.keysym=d(a);this.reliable=!0};l.prototype=new h;var g=function(c,b,f,d){h.apply(this);this.keyCode=c;this.keyIdentifier=b;this.key=f;this.location=
d;this.keysym=p[c]||(!v[c]?null:v[c][d]||v[c][0])||a(f,d);this.reliable=!0};g.prototype=new h;var m=[],v={8:[65288],9:[65289],12:[65291,65291,65291,65461],13:[65293],16:[65505,65505,65506],17:[65507,65507,65508],18:[65513,65513,65027],19:[65299],20:[65509],27:[65307],32:[32],33:[65365,65365,65365,65465],34:[65366,65366,65366,65459],35:[65367,65367,65367,65457],36:[65360,65360,65360,65463],37:[65361,65361,65361,65460],38:[65362,65362,65362,65464],39:[65363,65363,65363,65462],40:[65364,65364,65364,
65458],45:[65379,65379,65379,65456],46:[65535,65535,65535,65454],91:[65515],92:[65383],93:null,96:[65456],97:[65457],98:[65458],99:[65459],100:[65460],101:[65461],102:[65462],103:[65463],104:[65464],105:[65465],106:[65450],107:[65451],109:[65453],110:[65454],111:[65455],112:[65470],113:[65471],114:[65472],115:[65473],116:[65474],117:[65475],118:[65476],119:[65477],120:[65478],121:[65479],122:[65480],123:[65481],144:[65407],145:[65300],225:[65027]},n={Again:[65382],AllCandidates:[65341],Alphanumeric:[65328],
Alt:[65513,65513,65027],Attn:[64782],AltGraph:[65027],ArrowDown:[65364],ArrowLeft:[65361],ArrowRight:[65363],ArrowUp:[65362],Backspace:[65288],CapsLock:[65509],Cancel:[65385],Clear:[65291],Convert:[65313],Copy:[64789],Crsel:[64796],CrSel:[64796],CodeInput:[65335],Compose:[65312],Control:[65507,65507,65508],ContextMenu:[65383],DeadGrave:[65104],DeadAcute:[65105],DeadCircumflex:[65106],DeadTilde:[65107],DeadMacron:[65108],DeadBreve:[65109],DeadAboveDot:[65110],DeadUmlaut:[65111],DeadAboveRing:[65112],
DeadDoubleacute:[65113],DeadCaron:[65114],DeadCedilla:[65115],DeadOgonek:[65116],DeadIota:[65117],DeadVoicedSound:[65118],DeadSemivoicedSound:[65119],Delete:[65535],Down:[65364],End:[65367],Enter:[65293],EraseEof:[64774],Escape:[65307],Execute:[65378],Exsel:[64797],ExSel:[64797],F1:[65470],F2:[65471],F3:[65472],F4:[65473],F5:[65474],F6:[65475],F7:[65476],F8:[65477],F9:[65478],F10:[65479],F11:[65480],F12:[65481],F13:[65482],F14:[65483],F15:[65484],F16:[65485],F17:[65486],F18:[65487],F19:[65488],F20:[65489],
F21:[65490],F22:[65491],F23:[65492],F24:[65493],Find:[65384],GroupFirst:[65036],GroupLast:[65038],GroupNext:[65032],GroupPrevious:[65034],FullWidth:null,HalfWidth:null,HangulMode:[65329],Hankaku:[65321],HanjaMode:[65332],Help:[65386],Hiragana:[65317],HiraganaKatakana:[65319],Home:[65360],Hyper:[65517,65517,65518],Insert:[65379],JapaneseHiragana:[65317],JapaneseKatakana:[65318],JapaneseRomaji:[65316],JunjaMode:[65336],KanaMode:[65325],KanjiMode:[65313],Katakana:[65318],Left:[65361],Meta:[65511,65511,
65512],ModeChange:[65406],NumLock:[65407],PageDown:[65366],PageUp:[65365],Pause:[65299],Play:[64790],PreviousCandidate:[65342],PrintScreen:[64797],Redo:[65382],Right:[65363],RomanCharacters:null,Scroll:[65300],Select:[65376],Separator:[65452],Shift:[65505,65505,65506],SingleCandidate:[65340],Super:[65515,65515,65516],Tab:[65289],Up:[65362],Undo:[65381],Win:[65515],Zenkaku:[65320],ZenkakuHankaku:[65322]},r={65027:!0,65505:!0,65506:!0,65507:!0,65508:!0,65511:!0,65512:!0,65513:!0,65514:!0,65515:!0,65516:!0};
this.modifiers=new Guacamole.Keyboard.ModifierState;this.pressed={};var s={},p={},t=null,y=null;this.press=function(a){if(null!==a){if(!c.pressed[a]&&(c.pressed[a]=!0,c.onkeydown)){var b=c.onkeydown(a);s[a]=b;window.clearTimeout(t);window.clearInterval(y);r[a]||(t=window.setTimeout(function(){y=window.setInterval(function(){c.onkeyup(a);c.onkeydown(a)},50)},500));return b}return s[a]||!1}};this.release=function(a){if(c.pressed[a]&&(delete c.pressed[a],window.clearTimeout(t),window.clearInterval(y),
null!==a&&c.onkeyup))c.onkeyup(a)};this.reset=function(){for(var a in c.pressed)c.release(parseInt(a));m=[]};var w=function(a){a=Guacamole.Keyboard.ModifierState.fromKeyboardEvent(a);c.modifiers.alt&&!1===a.alt&&(c.release(65513),c.release(65514),c.release(65027));c.modifiers.shift&&!1===a.shift&&(c.release(65505),c.release(65506));c.modifiers.ctrl&&!1===a.ctrl&&(c.release(65507),c.release(65508));c.modifiers.meta&&!1===a.meta&&(c.release(65511),c.release(65512));c.modifiers.hyper&&!1===a.hyper&&
(c.release(65515),c.release(65516));c.modifiers=a},x=function(){var a=m[0];if(!a)return null;if(a instanceof k){var b=null,f=[];a.reliable?(b=a.keysym,f=m.splice(0,1)):m[1]instanceof l?(b=m[1].keysym,f=m.splice(0,2)):m[1]&&(b=a.keysym,f=m.splice(0,1));if(0<f.length){if(b){if(c.modifiers.ctrl&&c.modifiers.alt&&!(65<=b&&90>=b)&&!(97<=b&&122>=b)&&(255>=b||16777216===(b&4278190080)))c.release(65507),c.release(65508),c.release(65513),c.release(65514);var d=!c.press(b);p[a.keyCode]=b;c.modifiers.meta&&
(65511!==b&&65512!==b)&&c.release(b);for(b=0;b<f.length;b++)f[b].defaultPrevented=d}return a}}else{if(a instanceof g)if(b=a.keysym)c.release(b),a.defaultPrevented=!0;else return c.reset(),a;return m.shift()}return null},q=function(a){return"location"in a?a.location:"keyLocation"in a?a.keyLocation:0};b.addEventListener("keydown",function(a){if(c.onkeydown){var b;window.event?b=window.event.keyCode:a.which&&(b=a.which);w(a);229!==b&&(b=new k(b,a.keyIdentifier,a.key,q(a)),m.push(b),e()&&a.preventDefault())}},
!0);b.addEventListener("keypress",function(a){if(c.onkeydown||c.onkeyup){var b;window.event?b=window.event.keyCode:a.which&&(b=a.which);w(a);b=new l(b);m.push(b);e()&&a.preventDefault()}},!0);b.addEventListener("keyup",function(a){if(c.onkeyup){a.preventDefault();var b;window.event?b=window.event.keyCode:a.which&&(b=a.which);w(a);a=new g(b,a.keyIdentifier,a.key,q(a));m.push(a);e()}},!0)};Guacamole.Keyboard.ModifierState=function(){this.hyper=this.meta=this.alt=this.ctrl=this.shift=!1};
Guacamole.Keyboard.ModifierState.fromKeyboardEvent=function(b){var a=new Guacamole.Keyboard.ModifierState;a.shift=b.shiftKey;a.ctrl=b.ctrlKey;a.alt=b.altKey;a.meta=b.metaKey;b.getModifierState&&(a.hyper=b.getModifierState("OS")||b.getModifierState("Super")||b.getModifierState("Hyper")||b.getModifierState("Win"));return a};Guacamole=Guacamole||{};
Guacamole.Layer=function(b,a){function d(a,b,c,d){a=c+a;b=d+b;e.resize(a>e.width?a:e.width,b>e.height?b:e.height)}var e=this,c=document.createElement("canvas"),h=c.getContext("2d");h.save();var k=!0,l=0,g={1:"destination-in",2:"destination-out",4:"source-in",6:"source-atop",8:"source-out",9:"destination-atop",10:"xor",11:"destination-over",12:"copy",14:"source-over",15:"lighter"};this.autosize=!1;this.width=b;this.height=a;this.getCanvas=function(){return c};this.resize=function(a,b){if(a!==e.width||
b!==e.height){var d=null;0!==e.width&&0!==e.height&&(d=document.createElement("canvas"),d.width=e.width,d.height=e.height,d.getContext("2d").drawImage(c,0,0,e.width,e.height,0,0,e.width,e.height));var g=h.globalCompositeOperation;c.width=a;c.height=b;d&&h.drawImage(d,0,0,e.width,e.height,0,0,e.width,e.height);h.globalCompositeOperation=g;e.width=a;e.height=b;l=0;h.save()}};this.drawImage=function(a,b,c){e.autosize&&d(a,b,c.width,c.height);h.drawImage(c,a,b)};this.transfer=function(a,b,c,g,l,k,t,y){var w=
a.getCanvas();if(!(b>=w.width||c>=w.height))if(b+g>w.width&&(g=w.width-b),c+l>w.height&&(l=w.height-c),!(0===g||0===l)){e.autosize&&d(k,t,g,l);a=a.getCanvas().getContext("2d").getImageData(b,c,g,l);b=h.getImageData(k,t,g,l);for(c=0;c<4*g*l;c+=4){var w=new Guacamole.Layer.Pixel(a.data[c],a.data[c+1],a.data[c+2],a.data[c+3]),x=new Guacamole.Layer.Pixel(b.data[c],b.data[c+1],b.data[c+2],b.data[c+3]);y(w,x);b.data[c]=x.red;b.data[c+1]=x.green;b.data[c+2]=x.blue;b.data[c+3]=x.alpha}h.putImageData(b,k,
t)}};this.put=function(a,b,c,g,l,k,t){var y=a.getCanvas();b>=y.width||c>=y.height||(b+g>y.width&&(g=y.width-b),c+l>y.height&&(l=y.height-c),0===g||0===l||(e.autosize&&d(k,t,g,l),a=a.getCanvas().getContext("2d").getImageData(b,c,g,l),h.putImageData(a,k,t)))};this.copy=function(a,b,c,g,l,k,t){a=a.getCanvas();b>=a.width||c>=a.height||(b+g>a.width&&(g=a.width-b),c+l>a.height&&(l=a.height-c),0===g||0===l||(e.autosize&&d(k,t,g,l),h.drawImage(a,b,c,g,l,k,t,g,l)))};this.moveTo=function(a,b){k&&(h.beginPath(),
k=!1);e.autosize&&d(a,b,0,0);h.moveTo(a,b)};this.lineTo=function(a,b){k&&(h.beginPath(),k=!1);e.autosize&&d(a,b,0,0);h.lineTo(a,b)};this.arc=function(a,b,c,g,l,p){k&&(h.beginPath(),k=!1);e.autosize&&d(a,b,0,0);h.arc(a,b,c,g,l,p)};this.curveTo=function(a,b,c,g,l,p){k&&(h.beginPath(),k=!1);e.autosize&&d(l,p,0,0);h.bezierCurveTo(a,b,c,g,l,p)};this.close=function(){h.closePath();k=!0};this.rect=function(a,b,c,g){k&&(h.beginPath(),k=!1);e.autosize&&d(a,b,c,g);h.rect(a,b,c,g)};this.clip=function(){h.clip();
k=!0};this.strokeColor=function(a,b,c,d,e,g,l){h.lineCap=a;h.lineJoin=b;h.lineWidth=c;h.strokeStyle="rgba("+d+","+e+","+g+","+l/255+")";h.stroke();k=!0};this.fillColor=function(a,b,c,d){h.fillStyle="rgba("+a+","+b+","+c+","+d/255+")";h.fill();k=!0};this.strokeLayer=function(a,b,c,d){h.lineCap=a;h.lineJoin=b;h.lineWidth=c;h.strokeStyle=h.createPattern(d.getCanvas(),"repeat");h.stroke();k=!0};this.fillLayer=function(a){h.fillStyle=h.createPattern(a.getCanvas(),"repeat");h.fill();k=!0};this.push=function(){h.save();
l++};this.pop=function(){0<l&&(h.restore(),l--)};this.reset=function(){for(;0<l;)h.restore(),l--;h.restore();h.save();h.beginPath();k=!1};this.setTransform=function(a,b,c,d,e,g){h.setTransform(a,b,c,d,e,g)};this.transform=function(a,b,c,d,e,g){h.transform(a,b,c,d,e,g)};this.setChannelMask=function(a){h.globalCompositeOperation=g[a]};this.setMiterLimit=function(a){h.miterLimit=a};c.width=b;c.height=a;c.style.zIndex=-1};Guacamole.Layer.ROUT=2;Guacamole.Layer.ATOP=6;Guacamole.Layer.XOR=10;
Guacamole.Layer.ROVER=11;Guacamole.Layer.OVER=14;Guacamole.Layer.PLUS=15;Guacamole.Layer.RIN=1;Guacamole.Layer.IN=4;Guacamole.Layer.OUT=8;Guacamole.Layer.RATOP=9;Guacamole.Layer.SRC=12;Guacamole.Layer.Pixel=function(b,a,d,e){this.red=b;this.green=a;this.blue=d;this.alpha=e};Guacamole=Guacamole||{};
Guacamole.Mouse=function(b){function a(a){a.stopPropagation();a.preventDefault&&a.preventDefault();a.returnValue=!1}function d(){h=c.touchMouseThreshold}function e(b){var d=b.deltaY||-b.wheelDeltaY||-b.wheelDelta;d?1===b.deltaMode?d=b.deltaY*c.PIXELS_PER_LINE:2===b.deltaMode&&(d=b.deltaY*c.PIXELS_PER_PAGE):d=b.detail*c.PIXELS_PER_LINE;k+=d;if(k<=-c.scrollThreshold){do c.onmousedown&&(c.currentState.up=!0,c.onmousedown(c.currentState)),c.onmouseup&&(c.currentState.up=!1,c.onmouseup(c.currentState)),
k+=c.scrollThreshold;while(k<=-c.scrollThreshold);k=0}if(k>=c.scrollThreshold){do c.onmousedown&&(c.currentState.down=!0,c.onmousedown(c.currentState)),c.onmouseup&&(c.currentState.down=!1,c.onmouseup(c.currentState)),k-=c.scrollThreshold;while(k>=c.scrollThreshold);k=0}a(b)}var c=this;this.touchMouseThreshold=3;this.scrollThreshold=53;this.PIXELS_PER_LINE=18;this.PIXELS_PER_PAGE=16*this.PIXELS_PER_LINE;this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1);this.onmouseout=this.onmousemove=
this.onmouseup=this.onmousedown=null;var h=0,k=0;b.addEventListener("contextmenu",function(b){a(b)},!1);b.addEventListener("mousemove",function(d){a(d);if(h)h--;else if(c.currentState.fromClientPosition(b,d.clientX,d.clientY),c.onmousemove)c.onmousemove(c.currentState)},!1);b.addEventListener("mousedown",function(b){a(b);if(!h){switch(b.button){case 0:c.currentState.left=!0;break;case 1:c.currentState.middle=!0;break;case 2:c.currentState.right=!0}if(c.onmousedown)c.onmousedown(c.currentState)}},
!1);b.addEventListener("mouseup",function(b){a(b);if(!h){switch(b.button){case 0:c.currentState.left=!1;break;case 1:c.currentState.middle=!1;break;case 2:c.currentState.right=!1}if(c.onmouseup)c.onmouseup(c.currentState)}},!1);b.addEventListener("mouseout",function(d){d||(d=window.event);for(var e=d.relatedTarget||d.toElement;e;){if(e===b)return;e=e.parentNode}a(d);if(c.currentState.left||c.currentState.middle||c.currentState.right)if(c.currentState.left=!1,c.currentState.middle=!1,c.currentState.right=
!1,c.onmouseup)c.onmouseup(c.currentState);if(c.onmouseout)c.onmouseout()},!1);b.addEventListener("selectstart",function(b){a(b)},!1);b.addEventListener("touchmove",d,!1);b.addEventListener("touchstart",d,!1);b.addEventListener("touchend",d,!1);b.addEventListener("DOMMouseScroll",e,!1);b.addEventListener("mousewheel",e,!1);b.addEventListener("wheel",e,!1);var l=function(){var a=document.createElement("div");if(!("cursor"in a.style))return!1;try{a.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg\x3d\x3d) 0 0, auto"}catch(b){return!1}return/\burl\([^()]*\)\s+0\s+0\b/.test(a.style.cursor||
"")}();this.setCursor=function(a,c,d){return l?(a=a.toDataURL("image/png"),b.style.cursor="url("+a+") "+c+" "+d+", auto",!0):!1}};
Guacamole.Mouse.State=function(b,a,d,e,c,h,k){var l=this;this.x=b;this.y=a;this.left=d;this.middle=e;this.right=c;this.up=h;this.down=k;this.fromClientPosition=function(a,b,c){l.x=b-a.offsetLeft;l.y=c-a.offsetTop;for(a=a.offsetParent;a&&a!==document.body;)l.x-=a.offsetLeft-a.scrollLeft,l.y-=a.offsetTop-a.scrollTop,a=a.offsetParent;a&&(b=document.body.scrollTop||document.documentElement.scrollTop,l.x-=a.offsetLeft-(document.body.scrollLeft||document.documentElement.scrollLeft),l.y-=a.offsetTop-b)}};
Guacamole.Mouse.Touchpad=function(b){var a=this;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=10*(window.devicePixelRatio||1);this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1);this.onmousemove=this.onmouseup=this.onmousedown=null;var d=0,e=0,c=0,h=0,k=0,l={1:"left",2:"right",3:"middle"},g=!1,m=null;b.addEventListener("touchend",function(b){b.preventDefault();if(g&&0===b.touches.length){b=(new Date).getTime();var c=l[d];if(a.currentState[c]){a.currentState[c]=
!1;if(a.onmouseup)a.onmouseup(a.currentState);m&&(window.clearTimeout(m),m=null)}if(b-h<=a.clickTimingThreshold&&k<a.clickMoveThreshold){a.currentState[c]=!0;if(a.onmousedown)a.onmousedown(a.currentState);m=window.setTimeout(function(){a.currentState[c]=!1;if(a.onmouseup)a.onmouseup(a.currentState);g=!1},a.clickTimingThreshold)}m||(g=!1)}},!1);b.addEventListener("touchstart",function(a){a.preventDefault();d=Math.min(a.touches.length,3);m&&(window.clearTimeout(m),m=null);g||(g=!0,a=a.touches[0],e=
a.clientX,c=a.clientY,h=(new Date).getTime(),k=0)},!1);b.addEventListener("touchmove",function(g){g.preventDefault();g=g.touches[0];var l=g.clientX-e,m=g.clientY-c;k+=Math.abs(l)+Math.abs(m);if(1===d){var s=1+k/((new Date).getTime()-h);a.currentState.x+=l*s;a.currentState.y+=m*s;0>a.currentState.x?a.currentState.x=0:a.currentState.x>=b.offsetWidth&&(a.currentState.x=b.offsetWidth-1);0>a.currentState.y?a.currentState.y=0:a.currentState.y>=b.offsetHeight&&(a.currentState.y=b.offsetHeight-1);if(a.onmousemove)a.onmousemove(a.currentState);
e=g.clientX;c=g.clientY}else if(2===d&&Math.abs(m)>=a.scrollThreshold){l=0<m?"down":"up";a.currentState[l]=!0;if(a.onmousedown)a.onmousedown(a.currentState);a.currentState[l]=!1;if(a.onmouseup)a.onmouseup(a.currentState);e=g.clientX;c=g.clientY}},!1)};
Guacamole.Mouse.Touchscreen=function(b){function a(a){if(!l.currentState[a]&&(l.currentState[a]=!0,l.onmousedown))l.onmousedown(l.currentState)}function d(a){if(l.currentState[a]&&(l.currentState[a]=!1,l.onmouseup))l.onmouseup(l.currentState)}function e(a,c){l.currentState.fromClientPosition(b,a,c);if(l.onmousemove)l.onmousemove(l.currentState)}function c(a){var b=a.touches[0]||a.changedTouches[0];a=b.clientX-m;b=b.clientY-v;return Math.sqrt(a*a+b*b)>=l.clickMoveThreshold}function h(a){a=a.touches[0];
g=!0;m=a.clientX;v=a.clientY}function k(){window.clearTimeout(n);window.clearTimeout(r);g=!1}var l=this,g=!1,m=null,v=null,n=null,r=null;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=16*(window.devicePixelRatio||1);this.longPressThreshold=500;this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1);this.onmousemove=this.onmouseup=this.onmousedown=null;b.addEventListener("touchend",function(b){g&&(0!==b.touches.length||1!==b.changedTouches.length?
k():(window.clearTimeout(r),d("left"),c(b)||(b.preventDefault(),l.currentState.left||(b=b.changedTouches[0],e(b.clientX,b.clientY),a("left"),n=window.setTimeout(function(){d("left");k()},l.clickTimingThreshold)))))},!1);b.addEventListener("touchstart",function(b){1!==b.touches.length?k():(b.preventDefault(),h(b),window.clearTimeout(n),r=window.setTimeout(function(){var c=b.touches[0];e(c.clientX,c.clientY);a("right");d("right");k()},l.longPressThreshold))},!1);b.addEventListener("touchmove",function(a){g&&
(c(a)&&window.clearTimeout(r),1!==a.touches.length?k():l.currentState.left&&(a.preventDefault(),a=a.touches[0],e(a.clientX,a.clientY)))},!1)};Guacamole=Guacamole=Guacamole||{};
Guacamole.Object=function(b,a){var d=this,e={};this.index=a;this.onbody=function(a,b,d){var l=e[d];if(l){var g=l.shift();0===l.length&&delete e[d];d=g}else d=null;d&&d(a,b)};this.onundefine=null;this.requestInputStream=function(a,h){if(h){var k=e[a];k||(k=[],e[a]=k);k.push(h)}b.requestObjectInputStream(d.index,a)};this.createOutputStream=function(a,e){return b.createObjectOutputStream(d.index,a,e)}};Guacamole.Object.ROOT_STREAM="/";Guacamole.Object.STREAM_INDEX_MIMETYPE="application/vnd.glyptodon.guacamole.stream-index+json";
Guacamole=Guacamole||{};
Guacamole.OnScreenKeyboard=function(b){var a=this,d={},e={},c=[],h=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},k=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(/([^ ]+)[ ]*/g,function(a,c){return c===b?"":a})},l=0,g=function(a,b,c,d){this.width=b;this.height=c;this.scale=function(e){a.style.width=b*e+"px";a.style.height=c*e+"px";d&&(a.style.lineHeight=c*e+"px",a.style.fontSize=e+"px")}},m=function(b){b=a.keys[b];if(!b)return null;for(var c=b.length-
1;0<=c;c--){var e=b[c],g;a:{g=e.requires;for(var h=0;h<g.length;h++)if(!(g[h]in d)){g=!1;break a}g=!0}if(g)return e}return null},v=function(b,c){if(!e[b]){h(c,"guac-keyboard-pressed");var g=m(b);if(g.modifier){var l="guac-keyboard-modifier-"+s(g.modifier),n=d[g.modifier];if(n){if(k(r,l),delete d[g.modifier],a.onkeyup)a.onkeyup(n)}else if(h(r,l),d[g.modifier]=g.keysym,a.onkeydown)a.onkeydown(g.keysym)}else if(a.onkeydown)a.onkeydown(g.keysym);e[b]=!0}},n=function(b,c){if(e[b]){k(c,"guac-keyboard-pressed");
var d=m(b);if(!d.modifier&&a.onkeyup)a.onkeyup(d.keysym);e[b]=!1}},r=document.createElement("div");r.className="guac-keyboard";r.onselectstart=r.onmousemove=r.onmouseup=r.onmousedown=function(a){l&&l--;a.stopPropagation();return!1};this.touchMouseThreshold=3;this.onkeyup=this.onkeydown=null;this.layout=new Guacamole.OnScreenKeyboard.Layout(b);this.getElement=function(){return r};this.resize=function(b){b=Math.floor(10*b/a.layout.width)/10;for(var d=0;d<c.length;d++)c[d].scale(b)};this.keys=function(a){var c=
{},d;for(d in b.keys){var e=c,g=d,h;h=d;var l=a[d];if(l instanceof Array){for(var k=[],f=0;f<l.length;f++)k.push(new Guacamole.OnScreenKeyboard.Key(l[f],h));h=k}else h="number"===typeof l?[new Guacamole.OnScreenKeyboard.Key({name:h,keysym:l})]:"string"===typeof l?[new Guacamole.OnScreenKeyboard.Key({name:h,title:l})]:[new Guacamole.OnScreenKeyboard.Key(l,h)];e[g]=h}return c}(b.keys);var s=function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[^A-Za-z0-9]+/g,"-").toLowerCase()};(function t(b,
d,e){var k,m=document.createElement("div");e&&h(m,"guac-keyboard-"+s(e));if(d instanceof Array){h(m,"guac-keyboard-group");for(k=0;k<d.length;k++)t(m,d[k])}else if(d instanceof Object){h(m,"guac-keyboard-group");var z=Object.keys(d).sort();for(k=0;k<z.length;k++)e=z[k],t(m,d[e],e)}else if("number"===typeof d)h(m,"guac-keyboard-gap"),c.push(new g(m,d,d));else if("string"===typeof d){k=d;1===k.length&&(k="0x"+k.charCodeAt(0).toString(16));h(m,"guac-keyboard-key-container");var f=document.createElement("div");
f.className="guac-keyboard-key guac-keyboard-key-"+s(k);if(e=a.keys[d])for(k=0;k<e.length;k++){var z=e[k],r=document.createElement("div");r.className="guac-keyboard-cap";r.textContent=z.title;for(var A=0;A<z.requires.length;A++){var B=z.requires[A];h(r,"guac-keyboard-requires-"+s(B));h(f,"guac-keyboard-uses-"+s(B))}f.appendChild(r)}m.appendChild(f);c.push(new g(m,a.layout.keyWidths[d]||1,1,!0));k=function(a){a.preventDefault();0===l&&n(d,f)};f.addEventListener("touchstart",function(b){b.preventDefault();
l=a.touchMouseThreshold;v(d,f)},!0);f.addEventListener("touchend",function(b){b.preventDefault();l=a.touchMouseThreshold;n(d,f)},!0);f.addEventListener("mousedown",function(a){a.preventDefault();0===l&&v(d,f)},!0);f.addEventListener("mouseup",k,!0);f.addEventListener("mouseout",k,!0)}b.appendChild(m)})(r,b.layout)};Guacamole.OnScreenKeyboard.Layout=function(b){this.language=b.language;this.type=b.type;this.keys=b.keys;this.layout=b.layout;this.width=b.width;this.keyWidths=b.keyWidths||{}};
Guacamole.OnScreenKeyboard.Key=function(b,a){this.name=a||b.name;this.title=b.title||this.name;var d;if(!(d=b.keysym))d=this.title,!d||1!==d.length?d=null:(d=d.charCodeAt(0),d=0<=d&&255>=d?d:256<=d&&1114111>=d?16777216|d:null);this.keysym=d;this.modifier=b.modifier;this.requires=b.requires||[]};Guacamole=Guacamole||{};Guacamole.OutputStream=function(b,a){var d=this;this.index=a;this.onack=null;this.sendBlob=function(a){b.sendBlob(d.index,a)};this.sendEnd=function(){b.endStream(d.index)}};
Guacamole=Guacamole||{};
Guacamole.Parser=function(){var b=this,a="",d=[],e=-1,c=0;this.receive=function(h){4096<c&&e>=c&&(a=a.substring(c),e-=c,c=0);for(a+=h;e<a.length;){if(e>=c){h=a.substring(c,e);var k=a.substring(e,e+1);d.push(h);if(";"==k){h=d.shift();if(null!=b.oninstruction)b.oninstruction(h,d);d.length=0}else if(","!=k)throw Error("Illegal terminator.");c=e+1}h=a.indexOf(".",c);if(-1!=h){k=parseInt(a.substring(e+1,h));if(NaN==k)throw Error("Non-numeric character in element length.");c=h+1;e=c+k}else{c=a.length;break}}};
this.oninstruction=null};Guacamole=Guacamole||{};Guacamole.Status=function(b,a){var d=this;this.code=b;this.message=a;this.isError=function(){return 0>d.code||255<d.code}};Guacamole.Status.Code={SUCCESS:0,UNSUPPORTED:256,SERVER_ERROR:512,SERVER_BUSY:513,UPSTREAM_TIMEOUT:514,UPSTREAM_ERROR:515,RESOURCE_NOT_FOUND:516,RESOURCE_CONFLICT:517,CLIENT_BAD_REQUEST:768,CLIENT_UNAUTHORIZED:769,CLIENT_FORBIDDEN:771,CLIENT_TIMEOUT:776,CLIENT_OVERRUN:781,CLIENT_BAD_TYPE:783,CLIENT_TOO_MANY:797};
Guacamole=Guacamole||{};
Guacamole.StringReader=function(b){var a=this;b=new Guacamole.ArrayBufferReader(b);var d=0,e=0;b.ondata=function(b){var h="";b=new Uint8Array(b);for(var k=0;k<b.length;k++){var l=b[k];0===d?127===(l|127)?h+=String.fromCharCode(l):223===(l|31)?(e=l&31,d=1):239===(l|15)?(e=l&15,d=2):247===(l|7)?(e=l&7,d=3):h+="�":191===(l|63)?(e=e<<6|l&63,d--,0===d&&(h+=String.fromCharCode(e))):(d=0,h+="�")}if(a.ontext)a.ontext(h)};b.onend=function(){if(a.onend)a.onend()};this.onend=this.ontext=null};
Guacamole=Guacamole||{};
Guacamole.StringWriter=function(b){function a(b){var c,d;if(127>=b)c=0,d=1;else if(2047>=b)c=192,d=2;else if(65535>=b)c=224,d=3;else if(2097151>=b)c=240,d=4;else{a(65533);return}var e=d;if(k+e>=h.length){var n=new Uint8Array(2*(k+e));n.set(h);h=n}k+=e;e=k-1;for(n=1;n<d;n++)h[e--]=128|b&63,b>>=6;h[e]=c|b}function d(b){for(var c=0;c<b.length;c++){var d=b.charCodeAt(c);a(d)}if(0<k)return b=h.subarray(0,k),k=0,b}var e=this,c=new Guacamole.ArrayBufferWriter(b),h=new Uint8Array(8192),k=0;c.onack=function(a){if(e.onack)e.onack(a)};
this.sendText=function(a){c.sendData(d(a))};this.sendEnd=function(){c.sendEnd()};this.onack=null};Guacamole=Guacamole||{};Guacamole.Tunnel=function(){this.connect=function(b){};this.disconnect=function(){};this.sendMessage=function(b){};this.state=Guacamole.Tunnel.State.CONNECTING;this.receiveTimeout=15E3;this.oninstruction=this.onstatechange=this.onerror=null};Guacamole.Tunnel.State={CONNECTING:0,OPEN:1,CLOSED:2};
Guacamole.HTTPTunnel=function(b,a){function d(){window.clearTimeout(q);q=window.setTimeout(function(){e(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},g.receiveTimeout)}function e(a){if(g.state!==Guacamole.Tunnel.State.CLOSED){if(a.code!==Guacamole.Status.Code.SUCCESS&&g.onerror&&(g.state===Guacamole.Tunnel.State.CONNECTING||a.code!==Guacamole.Status.Code.RESOURCE_NOT_FOUND))g.onerror(a);g.state=Guacamole.Tunnel.State.CLOSED;y=!1;if(g.onstatechange)g.onstatechange(g.state)}}
function c(){if(g.state===Guacamole.Tunnel.State.OPEN)if(0<w.length){y=!0;var a=new XMLHttpRequest;a.open("POST",r+m);a.withCredentials=x;a.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset\x3dUTF-8");a.onreadystatechange=function(){4===a.readyState&&(200!==a.status?h(a):c())};a.send(w);w=""}else y=!1}function h(a){var b=parseInt(a.getResponseHeader("Guacamole-Status-Code"));a=a.getResponseHeader("Guacamole-Error-Message");e(new Guacamole.Status(b,a))}function k(a){function b(){if(g.state!==
Guacamole.Tunnel.State.OPEN)null!==c&&clearInterval(c);else if(!(2>a.readyState)){var m;try{m=a.status}catch(p){m=200}!e&&200===m&&(e=l());if(3===a.readyState||4===a.readyState)if(d(),t===s&&(3===a.readyState&&!c?c=setInterval(b,30):4===a.readyState&&!c&&clearInterval(c)),0===a.status)g.disconnect();else if(200!==a.status)h(a);else{var q;try{q=a.responseText}catch(w){return}for(;n<q.length;){if(n>=v){m=q.substring(v,n);var u=q.substring(n,n+1);r.push(m);if(";"===u){m=r.shift();if(g.oninstruction)g.oninstruction(m,
r);r.length=0}v=n+1}m=q.indexOf(".",v);if(-1!==m){u=parseInt(q.substring(n+1,m));if(0===u){c||clearInterval(c);a.onreadystatechange=null;a.abort();e&&k(e);break}v=m+1;n=v+u}else{v=q.length;break}}}}}var c=null,e=null,m=0,n=-1,v=0,r=[];a.onreadystatechange=t===s?function(){3===a.readyState&&(m++,2<=m&&(t=p,a.onreadystatechange=b));b()}:b;b()}function l(){var a=new XMLHttpRequest;a.open("GET",n+m+":"+u++);a.withCredentials=x;a.send(null);return a}var g=this,m,v=b+"?connect",n=b+"?read:",r=b+"?write:",
s=1,p=0,t=s,y=!1,w="",x=!!a,q=null;this.sendMessage=function(){function a(b){b=new String(b);return b.length+"."+b}if(g.state===Guacamole.Tunnel.State.OPEN&&0!==arguments.length){for(var b=a(arguments[0]),d=1;d<arguments.length;d++)b+=","+a(arguments[d]);w+=b+";";y||c()}};var u=0;this.connect=function(a){d();var b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===b.readyState)if(200!==b.status)h(b);else{d();m=b.responseText;g.state=Guacamole.Tunnel.State.OPEN;if(g.onstatechange)g.onstatechange(g.state);
k(l())}};b.open("POST",v,!0);b.withCredentials=x;b.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset\x3dUTF-8");b.send(a)};this.disconnect=function(){e(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}};Guacamole.HTTPTunnel.prototype=new Guacamole.Tunnel;
Guacamole.WebSocketTunnel=function(b){function a(){window.clearTimeout(h);h=window.setTimeout(function(){d(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},e.receiveTimeout)}function d(a){if(e.state!==Guacamole.Tunnel.State.CLOSED){if(a.code!==Guacamole.Status.Code.SUCCESS&&e.onerror)e.onerror(a);e.state=Guacamole.Tunnel.State.CLOSED;if(e.onstatechange)e.onstatechange(e.state);c.close()}}var e=this,c=null,h=null,k={"http:":"ws:","https:":"wss:"};if("ws:"!==b.substring(0,
3)&&"wss:"!==b.substring(0,4))if(k=k[window.location.protocol],"/"===b.substring(0,1))b=k+"//"+window.location.host+b;else{var l=window.location.pathname.lastIndexOf("/"),l=window.location.pathname.substring(0,l+1);b=k+"//"+window.location.host+l+b}this.sendMessage=function(a){function b(a){a=new String(a);return a.length+"."+a}if(e.state===Guacamole.Tunnel.State.OPEN&&0!==arguments.length){for(var d=b(arguments[0]),h=1;h<arguments.length;h++)d+=","+b(arguments[h]);c.send(d+";")}};this.connect=function(g){a();
c=new WebSocket(b+"?"+g,"guacamole");c.onopen=function(b){a();e.state=Guacamole.Tunnel.State.OPEN;if(e.onstatechange)e.onstatechange(e.state)};c.onclose=function(a){d(new Guacamole.Status(parseInt(a.reason),a.reason))};c.onerror=function(a){d(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,a.data))};c.onmessage=function(b){a();b=b.data;var c=0,g,h=[];do{var l=b.indexOf(".",c);-1!==l?(g=parseInt(b.substring(g+1,l)),c=l+1,g=c+g):d(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,"Incomplete instruction."));
c=b.substring(c,g);l=b.substring(g,g+1);h.push(c);if(";"===l){c=h.shift();if(e.oninstruction)e.oninstruction(c,h);h.length=0}c=g+1}while(c<b.length)}};this.disconnect=function(){d(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}};Guacamole.WebSocketTunnel.prototype=new Guacamole.Tunnel;
Guacamole.ChainedTunnel=function(b){function a(b){function g(){b.onstatechange=d.onstatechange;b.oninstruction=d.oninstruction;b.onerror=d.onerror;h=b}d.disconnect=b.disconnect;d.sendMessage=b.sendMessage;var k=function(d){if(d&&d.code===Guacamole.Status.Code.UPSTREAM_TIMEOUT)return c=[],null;if(d=c.shift())b.onerror=null,b.oninstruction=null,b.onstatechange=null,a(d);return d};b.onstatechange=function(a){switch(a){case Guacamole.Tunnel.State.OPEN:g();if(d.onstatechange)d.onstatechange(a);break;case Guacamole.Tunnel.State.CLOSED:if(!k()&&
d.onstatechange)d.onstatechange(a)}};b.oninstruction=function(a,b){g();if(d.oninstruction)d.oninstruction(a,b)};b.onerror=function(a){if(!k(a)&&d.onerror)d.onerror(a)};b.connect(e)}for(var d=this,e,c=[],h=null,k=0;k<arguments.length;k++)c.push(arguments[k]);this.connect=function(b){e=b;if(b=h?h:c.shift())a(b);else if(d.onerror)d.onerror(Guacamole.Status.Code.SERVER_ERROR,"No tunnels to try.")}};Guacamole.ChainedTunnel.prototype=new Guacamole.Tunnel;Guacamole=Guacamole||{};Guacamole.API_VERSION="0.9.9";
Guacamole=Guacamole||{};Guacamole.VideoPlayer=function(){this.sync=function(){}};Guacamole.VideoPlayer.isSupportedType=function(b){return!1};Guacamole.VideoPlayer.getSupportedTypes=function(){return[]};Guacamole.VideoPlayer.getInstance=function(b,a,d){return null};